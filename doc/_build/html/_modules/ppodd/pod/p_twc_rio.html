

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ppodd.pod.p_twc_rio &mdash; ppodd  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="ppodd  documentation" href="../../../index.html" />
    <link rel="up" title="ppodd.pod" href="../pod.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">ppodd  documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../pod.html" accesskey="U">ppodd.pod</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for ppodd.pod.p_twc_rio</h1><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">ppodd</span>
<span class="kn">from</span> <span class="nn">ppodd.core</span> <span class="kn">import</span> <span class="o">*</span>

<div class="viewcode-block" id="twc_rio"><a class="viewcode-back" href="../../../ppodd.pod.html#ppodd.pod.p_twc_rio.twc_rio">[docs]</a><span class="k">class</span> <span class="nc">twc_rio</span><span class="p">(</span><span class="n">cal_base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">       Flag and calibrate raw TWC data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dataset</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;CALTNOS&#39;</span><span class="p">,</span> <span class="s">&#39;CALTSAM&#39;</span><span class="p">,</span> <span class="s">&#39;CALTAMB&#39;</span><span class="p">,</span> <span class="s">&#39;CALTSRC&#39;</span><span class="p">,</span> <span class="s">&#39;CALHTR1&#39;</span><span class="p">,</span> <span class="s">&#39;CALHTR2&#39;</span><span class="p">,</span> <span class="s">&#39;CALISRC&#39;</span><span class="p">,</span>
                          <span class="s">&#39;TWCDAT_twc_detector&#39;</span><span class="p">,</span> <span class="s">&#39;TWCDAT_twc_nose_temp&#39;</span><span class="p">,</span> <span class="s">&#39;TWCDAT_twc_samp_temp&#39;</span><span class="p">,</span> <span class="s">&#39;TWCDAT_twc_amb_temp&#39;</span><span class="p">,</span> 
                          <span class="s">&#39;TWCDAT_twc_srce_temp&#39;</span><span class="p">,</span> <span class="s">&#39;TWCDAT_twc_evap1&#39;</span><span class="p">,</span><span class="s">&#39;TWCDAT_twc_evap2&#39;</span><span class="p">,</span>                                                  
                          <span class="s">&#39;TWCDAT_twc_srce_i&#39;</span><span class="p">,</span><span class="s">&#39;TWCDAT_twc_evap2_on&#39;</span><span class="p">,</span><span class="s">&#39;TWCDAT_status&#39;</span><span class="p">]</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">parameter</span><span class="p">(</span><span class="s">&#39;TWC_DET&#39;</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s">&#39;bits&#39;</span><span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span><span class="n">number</span><span class="o">=</span><span class="mi">664</span><span class="p">,</span><span class="n">long_name</span><span class="o">=</span><span class="s">&#39;Raw data from the TWC probe Lyman alpha detector&#39;</span><span class="p">)</span>
                     <span class="p">,</span><span class="n">parameter</span><span class="p">(</span><span class="s">&#39;TNOS_CAL&#39;</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s">&#39;DEG K&#39;</span><span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">number</span><span class="o">=</span><span class="mi">665</span><span class="p">,</span><span class="n">long_name</span><span class="o">=</span><span class="s">&#39;TWC NOSE TEMP&#39;</span><span class="p">)</span>
                     <span class="p">,</span><span class="n">parameter</span><span class="p">(</span><span class="s">&#39;TWC_TSAM&#39;</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s">&#39;K&#39;</span><span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">number</span><span class="o">=</span><span class="mi">666</span><span class="p">,</span><span class="n">long_name</span><span class="o">=</span><span class="s">&#39;Sample temperature in Kelvin from the TWC evaporator probe&#39;</span><span class="p">)</span>
                     <span class="p">,</span><span class="n">parameter</span><span class="p">(</span><span class="s">&#39;TAMB_CAL&#39;</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s">&#39;DEG K&#39;</span><span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">number</span><span class="o">=</span><span class="mi">667</span><span class="p">,</span><span class="n">long_name</span><span class="o">=</span><span class="s">&#39;TWC AMBIENT TEMP&#39;</span><span class="p">)</span>
                     <span class="p">,</span><span class="n">parameter</span><span class="p">(</span><span class="s">&#39;TSRC_CAL&#39;</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s">&#39;DEG K&#39;</span><span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">number</span><span class="o">=</span><span class="mi">668</span><span class="p">,</span><span class="n">long_name</span><span class="o">=</span><span class="s">&#39;TWC SOURCE TEMP&#39;</span><span class="p">)</span>
                     <span class="p">,</span><span class="n">parameter</span><span class="p">(</span><span class="s">&#39;HTR1_CAL&#39;</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s">&#39;AMPS&#39;</span><span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">number</span><span class="o">=</span><span class="mi">669</span><span class="p">,</span><span class="n">long_name</span><span class="o">=</span><span class="s">&#39;TWC EVAP1 CURRENT&#39;</span><span class="p">)</span>
                     <span class="p">,</span><span class="n">parameter</span><span class="p">(</span><span class="s">&#39;HTR2_CAL&#39;</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s">&#39;AMPS&#39;</span><span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">number</span><span class="o">=</span><span class="mi">670</span><span class="p">,</span><span class="n">long_name</span><span class="o">=</span><span class="s">&#39;TWC EVAP2 CURRENT&#39;</span><span class="p">)</span>
                     <span class="p">,</span><span class="n">parameter</span><span class="p">(</span><span class="s">&#39;ISRC_CAL&#39;</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s">&#39;AMPS&#39;</span><span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">number</span><span class="o">=</span><span class="mi">671</span><span class="p">,</span><span class="n">long_name</span><span class="o">=</span><span class="s">&#39;TWC SOURCE CURRENT&#39;</span><span class="p">)</span>
                     <span class="p">,</span><span class="n">parameter</span><span class="p">(</span><span class="s">&#39;STAT_CAL&#39;</span><span class="p">,</span><span class="n">units</span><span class="o">=</span><span class="s">&#39;RBITS&#39;</span><span class="p">,</span><span class="n">frequency</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">number</span><span class="o">=</span><span class="mi">672</span><span class="p">,</span><span class="n">long_name</span><span class="o">=</span><span class="s">&#39;TWC STATUS WORD&#39;</span><span class="p">)]</span>
        <span class="c">#self.name=&#39;TWC&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="o">=</span><span class="mf">1.00</span>
        <span class="n">cal_base</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dataset</span><span class="p">)</span>
        
<div class="viewcode-block" id="twc_rio.swap"><a class="viewcode-back" href="../../../ppodd.pod.html#ppodd.pod.p_twc_rio.twc_rio.swap">[docs]</a>    <span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cal</span><span class="p">,</span><span class="n">vlim</span><span class="p">,</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4096</span><span class="p">)):</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
        <span class="n">m</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">vlim</span><span class="o">*</span><span class="mi">1024</span><span class="o">/</span><span class="mf">4095.0</span>
        <span class="c">#x=np.arange(xlim[0],xlim[1])</span>
        <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4095</span><span class="p">)</span>
        <span class="n">x2</span><span class="o">=</span><span class="n">x</span><span class="o">*</span><span class="n">m</span><span class="o">-</span><span class="n">vlim</span><span class="o">*</span><span class="mi">1024</span>
        <span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">cal</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">cal</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            </div>
<div class="viewcode-block" id="twc_rio.process"><a class="viewcode-back" href="../../../ppodd.pod.html#ppodd.pod.p_twc_rio.twc_rio.process">[docs]</a>    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        detector between max and min ( -9,+9 )</span>
<span class="sd">        caltnos - nose_temp, use status word to flag ?  or &gt; 383K  10K/s</span>
<span class="sd">        caltsam - samp_temp  &quot;  323K &lt; T &lt; 388K                    3K/s</span>
<span class="sd">        caltamb - amb_temp  &quot; 289K &lt; T &lt; 343K                      2K/s</span>
<span class="sd">        caltsrc - srce_temp &quot; 378K &lt; T &lt; 393K                      5K/s</span>
<span class="sd">        calhtr1 - 0.3A &lt; I &lt; 6.6A                                 0.5A/s</span>
<span class="sd">        calhtr2 - 0.3A &lt; I &lt; 6.6A                                 0.5A/s</span>
<span class="sd">        calisrc - -0.4mA &lt; I &lt; -1.1mA                             0.05mA/s</span>
<span class="sd">!c_twc     Lyman alpha total water - temps in K, currents in A, TWC decades refit 22/10/2013</span>
<span class="sd">CALTNOS   1.2614E-16 -1.8668E-12  1.2704E-08  9.4262E-03  3.1654E+02</span>
<span class="sd">CALTSAM   2.5406E-17  3.5253E-13  2.1300E-09  7.1707E-06  2.7927E-02  4.0343E+02</span>
<span class="sd">CALTAMB   2.9951E-13  9.3288E-10 -4.0779E-06  1.6016E-02  2.7390E+02</span>
<span class="sd">CALTSRC   2.8700E-18 -1.2794E-14  2.8480E-11  2.2585E-10  9.5178E-03  3.7298E+02</span>
<span class="sd">CALHTR1   9.7752E-04  0.0000E+00</span>
<span class="sd">CALHTR2   9.7752E-04  0.0000E+00</span>
<span class="sd">CALISRC   9.7636E-08 -2.5957E-06</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">caltnos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s">&#39;CALTNOS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="n">caltsam</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s">&#39;CALTSAM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="n">caltamb</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s">&#39;CALTAMB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="n">caltsrc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s">&#39;CALTSRC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="n">calhtr1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s">&#39;CALHTR1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="n">calhtr2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s">&#39;CALHTR2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="n">calisrc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s">&#39;CALISRC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="c"># ranges ( min, max, max rate of change )</span>
        <span class="c"># These should really be in the constants </span>
        <span class="n">ranges</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;TWC_DET&#39;</span><span class="p">:(</span><span class="o">-</span><span class="mi">9</span><span class="o">*</span><span class="mi">1024</span><span class="p">,</span><span class="mi">9</span><span class="o">*</span><span class="mi">1024</span><span class="p">,</span><span class="mi">20</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span>
                <span class="s">&#39;TNOS_CAL&#39;</span><span class="p">:(</span><span class="mi">314</span><span class="p">,</span><span class="mi">383</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span>
                <span class="s">&#39;TWC_TSAM&#39;</span><span class="p">:(</span><span class="mi">300</span><span class="p">,</span><span class="mi">388</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span>
                <span class="s">&#39;TAMB_CAL&#39;</span><span class="p">:(</span><span class="mi">289</span><span class="p">,</span><span class="mi">343</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
                <span class="s">&#39;TSRC_CAL&#39;</span><span class="p">:(</span><span class="mi">378</span><span class="p">,</span><span class="mi">393</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span>
                <span class="s">&#39;HTR1_CAL&#39;</span><span class="p">:(</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">6.6</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),</span>
                <span class="s">&#39;HTR2_CAL&#39;</span><span class="p">:(</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">6.6</span><span class="p">,</span><span class="mf">0.5</span><span class="p">),</span>
                <span class="s">&#39;ISRC_CAL&#39;</span><span class="p">:(</span><span class="o">-</span><span class="mf">1.1e-3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.4e-3</span><span class="p">,</span><span class="mf">0.05e-3</span><span class="p">),</span><span class="s">&#39;STAT_CAL&#39;</span><span class="p">:(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)}</span>
        <span class="n">times</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_twc_detector&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">times</span>
        <span class="n">flags</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">times</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="s">&#39;u1&#39;</span><span class="p">)</span>
        <span class="n">flags64</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">times</span><span class="o">.</span><span class="n">at_frequency</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="s">&#39;u1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">flagged_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_twc_detector&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span><span class="n">times</span><span class="p">,</span><span class="n">flags64</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">flagged_data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">caltnos</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_twc_nose_temp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span><span class="n">times</span><span class="p">,</span><span class="n">flags</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">flagged_data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">caltsam</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_twc_samp_temp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span><span class="n">times</span><span class="p">,</span><span class="n">flags</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">flagged_data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">caltamb</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_twc_amb_temp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span><span class="n">times</span><span class="p">,</span><span class="n">flags</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">flagged_data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">caltsrc</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_twc_srce_temp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span><span class="n">times</span><span class="p">,</span><span class="n">flags</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">flagged_data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">calhtr1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_twc_evap1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span><span class="n">times</span><span class="p">,</span><span class="n">flags</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">flagged_data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">calhtr2</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_twc_evap2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span><span class="n">times</span><span class="p">,</span><span class="n">flags</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">flagged_data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">calisrc</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_twc_srce_i&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span><span class="n">times</span><span class="p">,</span><span class="n">flags</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s">&#39;TWCDAT_status&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">mn</span><span class="p">,</span><span class="n">mx</span><span class="p">,</span><span class="n">rate</span><span class="o">=</span><span class="n">ranges</span><span class="p">[</span><span class="n">o</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">flag</span><span class="p">[</span><span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="o">&lt;</span><span class="n">mn</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
            <span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">flag</span><span class="p">[</span><span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="o">&gt;</span><span class="n">mx</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
            <span class="n">rchange</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">ravel</span><span class="p">())</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span><span class="o">.</span><span class="n">times</span><span class="p">)))</span>
            <span class="n">rchange</span><span class="o">.</span><span class="n">shape</span><span class="o">=</span><span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span>
            <span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">flag</span><span class="p">[</span><span class="n">rchange</span><span class="o">&gt;</span><span class="n">rate</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
        
        
         
         </div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">ppodd  documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../pod.html" >ppodd.pod</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Author.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>